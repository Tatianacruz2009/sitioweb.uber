"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([["legacy-4628"],{12247:function(e,r,t){t.d(r,{ly:function(){return E},vZ:function(){return w}});var n,i=t(90417),a=t(64187),o=t(7766),u=t(36741),l=t(57351),c=t(16815),f=t(78079);function s(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return m(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return m(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==t.return||t.return()}finally{if(u)throw a}}}}function m(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function y(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v(n.key),n)}}function b(e,r,t){return(r=v(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function v(e){var r=function(e,r){if("object"!==g(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"===g(r)?r:String(r)}var p=function(){function e(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,r,t){r&&y(e.prototype,r),t&&y(e,t),Object.defineProperty(e,"prototype",{writable:!1})}(e,null,[{key:"removeHeightWhenZeroOrBy",value:function(e,r){return!e.height||r?(0,l.A)(e,"height"):e}},{key:"getValidSrc",value:function(r){var t=e.getFirstValidOrDefault(r,e.imageIsValid,"src",{});return t&&t.src||""}},{key:"getFirstValidOrDefault",value:function(r,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=e.getFirstValidValue(r,void 0,t);return a&&a[n]?a:i}},{key:"forceToArray",value:function(e){return Array.isArray(e)?e:[e]}},{key:"getFirstValidValue",value:function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return"undefined"!=typeof e},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return e},a=e.forceToArray(r).map(i).find(n);return"undefined"!=typeof a?a:t}},{key:"getAssetFormat",value:function(r){if("string"!=typeof r)return"IMAGE";var t=(0,f.parse)(r).pathname,n=(0,c.extname)(t||""),i="IMAGE";return n&&"undefined"!=typeof n&&(i=e.ASSET_FORMAT[n.split(".")[1].toUpperCase()]),i||"IMAGE"}},{key:"isValidImageUrl",value:function(r){return!!r&&("string"==typeof r&&""!==r&&"IMAGE"===e.getAssetFormat(r))}},{key:"isSvgUrl",value:function(e){if("string"!=typeof e)return!1;try{var r=new URL(e);return".svg"===(0,c.extname)(r.pathname).toLowerCase()}catch(r){return".svg"===(0,c.extname)(e).toLowerCase()}}},{key:"imageIsValid",value:function(r){if(!r)return!1;var t=Object.prototype.hasOwnProperty.call(r,"src")&&e.isValidImageUrl(r.src),n=Object.prototype.hasOwnProperty.call(r,"legacySrc")&&e.isValidImageUrl(r.legacySrc);return t||n}},{key:"dimensionsFactory",value:function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return{height:void 0!==r?Math.round(r*t):NaN,get largest(){return this.width>this.height?this.width:this.height},width:void 0!==e?Math.round(e*t):NaN}}}]),e}();n=p,b(p,"CLOUDINARY_UBER_ASSETS","https://www.uber-assets.com"),b(p,"CLOUDINARY_DOMAIN","cloudinary.com"),b(p,"ASSET_FORMAT",{GIF:"IMAGE",JPG:"IMAGE",MOV:"VIDEO",MP3:"AUDIO",MP4:"VIDEO",PNG:"IMAGE",SVG:"IMAGE",WAV:"AUDIO",WEBP:"IMAGE"}),b(p,"BREAKPOINT_NAME",{large:"large",medium:"medium",small:"small"}),b(p,"breakpointToImagePriority",b(b(b({},n.BREAKPOINT_NAME.large,["image","imageTablet","imageMobile"]),n.BREAKPOINT_NAME.medium,["imageTablet","image","imageMobile"]),n.BREAKPOINT_NAME.small,["imageMobile","imageTablet","image"])),b(p,"getCurrentBreakpoint",(function(e,r){return r>=e.large?n.BREAKPOINT_NAME.large:r>=e.medium?n.BREAKPOINT_NAME.medium:n.BREAKPOINT_NAME.small})),b(p,"isCloudinaryUrl",(function(e){return(null==e?void 0:e.startsWith(n.CLOUDINARY_UBER_ASSETS))||(null==e?void 0:e.includes(n.CLOUDINARY_DOMAIN))||!1})),b(p,"getCurrentImage",(function(e){var r=e.image,t=e.imageTablet,i=e.imageMobile,a=e.currentBreakpoint,o=n.imageIsValid(r),u=n.imageIsValid(t),l=n.imageIsValid(i);return function(e){var n,a=s(e);try{for(a.s();!(n=a.n()).done;){var c=n.value;if("image"===c&&o)return r;if("imageTablet"===c&&u)return t;if("imageMobile"===c&&l)return i}}catch(e){a.e(e)}finally{a.f()}}(n.breakpointToImagePriority[a]||[])}));var d=p;function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function h(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function S(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?h(Object(t),!0).forEach((function(r){O(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function O(e,r,t){return(r=function(e){var r=function(e,r){if("object"!==A(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!==A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"===A(r)?r:String(r)}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var I=function(){var e=(0,a.R)(),r=e.migrationStarted;return{allowAssetBankSources:e.allowAssetBankSources,enableFallback:e.enableFallback,migrationStarted:r}},E=function(){var e=I(),r=e.migrationStarted,t=e.allowAssetBankSources,n=e.enableFallback,a=(0,i.useCallback)((function(e){return e?r?t?e.src||n&&e.legacySrc||"":e.legacySrc||n&&e.src||"":e.src||n&&e.legacySrc||"":""}),[r,t,n]),o=(0,i.useCallback)((function(e){if(!e)return e;var r=a(e);return S(S({},e),{},{src:r})}),[a]);return{getImageSource:a,normalizeImageObject:o}},w=function(e){var r=E().normalizeImageObject,t=function(){var e=I(),r=e.migrationStarted,t=e.allowAssetBankSources,n=e.enableFallback,a=function(e){return"string"==typeof e&&""!==e&&"IMAGE"===d.getAssetFormat(e)};return(0,i.useCallback)((function(e){return!!e&&(r?t?a(e.src)||n&&a(e.legacySrc):a(e.legacySrc)||n&&a(e.src):a(e.src)||n&&a(e.legacySrc))}),[r,t,n])}(),n=P(),a=r(e);return{image:a,isValid:!!a&&t(a),onError:n}},P=function(){var e=(0,i.useContext)(o.P).onImageRenderingFailure;return(0,i.useCallback)((function(r){if(e){var t=null==r?void 0:r.currentTarget,n=(null==t?void 0:t.currentSrc)||(null==t?void 0:t.src)||"",i=(null==t?void 0:t.naturalWidth)||0,a=(null==t?void 0:t.naturalHeight)||0,o=(null==t?void 0:t.complete)||!1,u="image_load_failure",l="Image failed to load";n?0===i&&0===a&&(u="invalid_format",l="Invalid image format or corrupted file"):(u="missing_src",l="Image source URL is missing or empty");var c="".concat(l," (dimensions: ").concat(i,"x").concat(a,", complete: ").concat(o,")");e({complete:o,imageUrl:n,message:c,type:u})}}),[e])};u.Ay.values.aspectRatios}}]);
//# sourceMappingURL=https://sourcemaps.uberinternal.com/raw/uber-sites/client-legacy-legacy-4628-fff5ee3387752c7a.js.map