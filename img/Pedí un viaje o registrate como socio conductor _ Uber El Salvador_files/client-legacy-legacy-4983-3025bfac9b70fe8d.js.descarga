"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([["legacy-4983"],{11418:function(t,n,e){e.d(n,{UD:function(){return i},rJ:function(){return r}});var r={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function i(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Math.sign(function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=n.start,r=void 0===e?0:e,i=n.end,o=void 0===i?t.length:i,u=n.size||2,a=0,l=r,c=o-u;l<o;l+=u)a+=(t[l]-t[c])*(t[l+1]+t[c+1]),c=l;return a/2}(t,n))}(t,e);return r!==n&&(function(t,n){for(var e=n.start,r=void 0===e?0:e,i=n.end,o=void 0===i?t.length:i,u=n.size,a=void 0===u?2:u,l=(o-r)/a,c=Math.floor(l/2),f=0;f<c;++f)for(var s=r+f*a,g=r+(l-1-f)*a,h=0;h<a;++h){var p=t[s+h];t[s+h]=t[g+h],t[g+h]=p}}(t,e),!0)}},21241:function(t,n,e){e.d(n,{A:function(){return b}});var r=e(5709),i=e(84760),o=e(19782),u=e(41462);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function l(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,n){if(!t)return;if("string"==typeof t)return c(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return c(t,n)}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,a=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return u=t.done,t},e:function(t){a=!0,o=t},f:function(){try{u||null==e.return||e.return()}finally{if(a)throw o}}}}function c(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function f(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function s(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?f(Object(e),!0).forEach((function(n){g(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):f(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function g(t,n,e){return(n=p(n))in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function h(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,p(r.key),r)}}function p(t){var n=function(t,n){if("object"!==a(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,n||"default");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"===a(n)?n:String(n)}function v(){return v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,n,e){var r=function(t,n){for(;!Object.prototype.hasOwnProperty.call(t,n)&&null!==(t=x(t)););return t}(t,n);if(r){var i=Object.getOwnPropertyDescriptor(r,n);return i.get?i.get.call(arguments.length<3?t:e):i.value}},v.apply(this,arguments)}function y(t,n){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},y(t,n)}function d(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=x(t);if(n){var i=x(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return function(t,n){if(n&&("object"===a(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,e)}}function x(t){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},x(t)}var b=function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&y(t,n)}(e,t);var n=d(e);function e(){return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),n.apply(this,arguments)}return function(t,n,e){n&&h(t.prototype,n),e&&h(t,e),Object.defineProperty(t,"prototype",{writable:!1})}(e,[{key:"isComposite",get:function(){return!0}},{key:"isLoaded",get:function(){return v(x(e.prototype),"isLoaded",this)&&this.getSubLayers().every((function(t){return t.isLoaded}))}},{key:"getSubLayers",value:function(){return this.internalState&&this.internalState.subLayers||[]}},{key:"initializeState",value:function(t){}},{key:"setState",value:function(t){v(x(e.prototype),"setState",this).call(this,t),this.setNeedsUpdate()}},{key:"getPickingInfo",value:function(t){var n=t.info,e=n.object;return e&&e.__source&&e.__source.parent&&e.__source.parent.id===this.id?(n.object=e.__source.object,n.index=e.__source.index,n):n}},{key:"filterSubLayer",value:function(t){return!0}},{key:"shouldRenderSubLayer",value:function(t,n){return n&&n.length}},{key:"getSubLayerClass",value:function(t,n){var e=this.props._subLayerProps;return e&&e[t]&&e[t].type||n}},{key:"getSubLayerRow",value:function(t,n,e){return t.__source={parent:this,object:n,index:e},t}},{key:"getSubLayerAccessor",value:function(t){if("function"==typeof t){var n={index:-1,data:this.props.data,target:[]};return function(e,r){return e&&e.__source?(n.index=e.__source.index,t(e.__source.object,n)):t(e,r)}}return t}},{key:"getSubLayerProps",value:function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.props,r=e.opacity,i=e.pickable,o=e.visible,u=e.parameters,a=e.getPolygonOffset,c=e.highlightedObjectIndex,f=e.autoHighlight,g=e.highlightColor,h=e.coordinateSystem,p=e.coordinateOrigin,v=e.wrapLongitude,y=e.positionFormat,d=e.modelMatrix,x=e.extensions,b=e.fetch,_=e.operation,m=e._subLayerProps,L={id:"",updateTriggers:{},opacity:r,pickable:i,visible:o,parameters:u,getPolygonOffset:a,highlightedObjectIndex:c,autoHighlight:f,highlightColor:g,coordinateSystem:h,coordinateOrigin:p,wrapLongitude:v,positionFormat:y,modelMatrix:d,extensions:x,fetch:b,operation:_},w=m&&n.id&&m[n.id],S=w&&w.updateTriggers,C=n.id||"sublayer";if(w){var O=this.constructor._propTypes,P=n.type?n.type._propTypes:{};for(var j in w){var A=P[j]||O[j];A&&"accessor"===A.type&&(w[j]=this.getSubLayerAccessor(w[j]))}}Object.assign(L,n,w),L.id="".concat(this.props.id,"-").concat(C),L.updateTriggers=s(s({all:null===(t=this.props.updateTriggers)||void 0===t?void 0:t.all},n.updateTriggers),S);var T,E=l(x);try{for(E.s();!(T=E.n()).done;){var k=T.value,M=k.getSubLayerProps.call(this,k);M&&Object.assign(L,M,{updateTriggers:Object.assign(L.updateTriggers,M.updateTriggers)})}}catch(t){E.e(t)}finally{E.f()}return L}},{key:"_updateAutoHighlight",value:function(t){var n,e=l(this.getSubLayers());try{for(e.s();!(n=e.n()).done;){n.value.updateAutoHighlight(t)}}catch(t){e.e(t)}finally{e.f()}}},{key:"_getAttributeManager",value:function(){return null}},{key:"_postUpdate",value:function(t,n){var e=this.internalState.subLayers,r=!e||this.needsUpdate();if(r){var i=this.renderLayers();e=(0,u.B)(i,Boolean),this.internalState.subLayers=e}(0,o.A)("compositeLayer.renderLayers",this,r,e);var a,c=l(e);try{for(c.s();!(a=c.n()).done;){a.value.parent=this}}catch(t){c.e(t)}finally{c.f()}}}]),e}(i.A);(0,r.A)(b,"layerName","CompositeLayer")},79371:function(t){function n(t,n,o){o=o||2;var u,a,l,s,g,p,v,y=n&&n.length,d=y?n[0]*o:t.length,x=e(t,0,d,o,!0),b=[];if(!x||x.next===x.prev)return b;if(y&&(x=function(t,n,i,o){var u,a,l,s=[];for(u=0,a=n.length;u<a;u++)(l=e(t,n[u]*o,u<a-1?n[u+1]*o:t.length,o,!1))===l.next&&(l.steiner=!0),s.push(h(l));for(s.sort(c),u=0;u<s.length;u++)f(s[u],i),i=r(i,i.next);return i}(t,n,x,o)),t.length>80*o){u=l=t[0],a=s=t[1];for(var _=o;_<d;_+=o)(g=t[_])<u&&(u=g),(p=t[_+1])<a&&(a=p),g>l&&(l=g),p>s&&(s=p);v=0!==(v=Math.max(l-u,s-a))?1/v:0}return i(x,b,o,u,a,v),b}function e(t,n,e,r,i){var o,u;if(i===O(t,n,e,r)>0)for(o=n;o<e;o+=r)u=w(o,t[o],t[o+1],u);else for(o=e-r;o>=n;o-=r)u=w(o,t[o],t[o+1],u);return u&&d(u,u.next)&&(S(u),u=u.next),u}function r(t,n){if(!t)return t;n||(n=t);var e,r=t;do{if(e=!1,r.steiner||!d(r,r.next)&&0!==y(r.prev,r,r.next))r=r.next;else{if(S(r),(r=n=r.prev)===r.next)break;e=!0}}while(e||r!==n);return n}function i(t,n,e,c,f,s,h){if(t){!h&&s&&function(t,n,e,r){var i=t;do{null===i.z&&(i.z=g(i.x,i.y,n,e,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var n,e,r,i,o,u,a,l,c=1;do{for(e=t,t=null,o=null,u=0;e;){for(u++,r=e,a=0,n=0;n<c&&(a++,r=r.nextZ);n++);for(l=c;a>0||l>0&&r;)0!==a&&(0===l||!r||e.z<=r.z)?(i=e,e=e.nextZ,a--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;e=r}o.nextZ=null,c*=2}while(u>1)}(i)}(t,c,f,s);for(var p,v,y=t;t.prev!==t.next;)if(p=t.prev,v=t.next,s?u(t,c,f,s):o(t))n.push(p.i/e),n.push(t.i/e),n.push(v.i/e),S(t),t=v.next,y=v.next;else if((t=v)===y){h?1===h?i(t=a(r(t),n,e),n,e,c,f,s,2):2===h&&l(t,n,e,c,f,s):i(r(t),n,e,c,f,s,1);break}}}function o(t){var n=t.prev,e=t,r=t.next;if(y(n,e,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(p(n.x,n.y,e.x,e.y,r.x,r.y,i.x,i.y)&&y(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function u(t,n,e,r){var i=t.prev,o=t,u=t.next;if(y(i,o,u)>=0)return!1;for(var a=i.x<o.x?i.x<u.x?i.x:u.x:o.x<u.x?o.x:u.x,l=i.y<o.y?i.y<u.y?i.y:u.y:o.y<u.y?o.y:u.y,c=i.x>o.x?i.x>u.x?i.x:u.x:o.x>u.x?o.x:u.x,f=i.y>o.y?i.y>u.y?i.y:u.y:o.y>u.y?o.y:u.y,s=g(a,l,n,e,r),h=g(c,f,n,e,r),v=t.prevZ,d=t.nextZ;v&&v.z>=s&&d&&d.z<=h;){if(v!==t.prev&&v!==t.next&&p(i.x,i.y,o.x,o.y,u.x,u.y,v.x,v.y)&&y(v.prev,v,v.next)>=0)return!1;if(v=v.prevZ,d!==t.prev&&d!==t.next&&p(i.x,i.y,o.x,o.y,u.x,u.y,d.x,d.y)&&y(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;v&&v.z>=s;){if(v!==t.prev&&v!==t.next&&p(i.x,i.y,o.x,o.y,u.x,u.y,v.x,v.y)&&y(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;d&&d.z<=h;){if(d!==t.prev&&d!==t.next&&p(i.x,i.y,o.x,o.y,u.x,u.y,d.x,d.y)&&y(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function a(t,n,e){var i=t;do{var o=i.prev,u=i.next.next;!d(o,u)&&x(o,i,i.next,u)&&m(o,u)&&m(u,o)&&(n.push(o.i/e),n.push(i.i/e),n.push(u.i/e),S(i),S(i.next),i=t=u),i=i.next}while(i!==t);return r(i)}function l(t,n,e,o,u,a){var l=t;do{for(var c=l.next.next;c!==l.prev;){if(l.i!==c.i&&v(l,c)){var f=L(l,c);return l=r(l,l.next),f=r(f,f.next),i(l,n,e,o,u,a),void i(f,n,e,o,u,a)}c=c.next}l=l.next}while(l!==t)}function c(t,n){return t.x-n.x}function f(t,n){if(n=function(t,n){var e,r=n,i=t.x,o=t.y,u=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>u){if(u=a,a===i){if(o===r.y)return r;if(o===r.next.y)return r.next}e=r.x<r.next.x?r:r.next}}r=r.next}while(r!==n);if(!e)return null;if(i===u)return e;var l,c=e,f=e.x,g=e.y,h=1/0;r=e;do{i>=r.x&&r.x>=f&&i!==r.x&&p(o<g?i:u,o,f,g,o<g?u:i,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(i-r.x),m(r,t)&&(l<h||l===h&&(r.x>e.x||r.x===e.x&&s(e,r)))&&(e=r,h=l)),r=r.next}while(r!==c);return e}(t,n),n){var e=L(n,t);r(n,n.next),r(e,e.next)}}function s(t,n){return y(t.prev,t,n.prev)<0&&y(n.next,t,t.next)<0}function g(t,n,e,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-e)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-r)*i)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function h(t){var n=t,e=t;do{(n.x<e.x||n.x===e.x&&n.y<e.y)&&(e=n),n=n.next}while(n!==t);return e}function p(t,n,e,r,i,o,u,a){return(i-u)*(n-a)-(t-u)*(o-a)>=0&&(t-u)*(r-a)-(e-u)*(n-a)>=0&&(e-u)*(o-a)-(i-u)*(r-a)>=0}function v(t,n){return t.next.i!==n.i&&t.prev.i!==n.i&&!function(t,n){var e=t;do{if(e.i!==t.i&&e.next.i!==t.i&&e.i!==n.i&&e.next.i!==n.i&&x(e,e.next,t,n))return!0;e=e.next}while(e!==t);return!1}(t,n)&&(m(t,n)&&m(n,t)&&function(t,n){var e=t,r=!1,i=(t.x+n.x)/2,o=(t.y+n.y)/2;do{e.y>o!=e.next.y>o&&e.next.y!==e.y&&i<(e.next.x-e.x)*(o-e.y)/(e.next.y-e.y)+e.x&&(r=!r),e=e.next}while(e!==t);return r}(t,n)&&(y(t.prev,t,n.prev)||y(t,n.prev,n))||d(t,n)&&y(t.prev,t,t.next)>0&&y(n.prev,n,n.next)>0)}function y(t,n,e){return(n.y-t.y)*(e.x-n.x)-(n.x-t.x)*(e.y-n.y)}function d(t,n){return t.x===n.x&&t.y===n.y}function x(t,n,e,r){var i=_(y(t,n,e)),o=_(y(t,n,r)),u=_(y(e,r,t)),a=_(y(e,r,n));return i!==o&&u!==a||(!(0!==i||!b(t,e,n))||(!(0!==o||!b(t,r,n))||(!(0!==u||!b(e,t,r))||!(0!==a||!b(e,n,r)))))}function b(t,n,e){return n.x<=Math.max(t.x,e.x)&&n.x>=Math.min(t.x,e.x)&&n.y<=Math.max(t.y,e.y)&&n.y>=Math.min(t.y,e.y)}function _(t){return t>0?1:t<0?-1:0}function m(t,n){return y(t.prev,t,t.next)<0?y(t,n,t.next)>=0&&y(t,t.prev,n)>=0:y(t,n,t.prev)<0||y(t,t.next,n)<0}function L(t,n){var e=new C(t.i,t.x,t.y),r=new C(n.i,n.x,n.y),i=t.next,o=n.prev;return t.next=n,n.prev=t,e.next=i,i.prev=e,r.next=e,e.prev=r,o.next=r,r.prev=o,r}function w(t,n,e,r){var i=new C(t,n,e);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function S(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function C(t,n,e){this.i=t,this.x=n,this.y=e,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function O(t,n,e,r){for(var i=0,o=n,u=e-r;o<e;o+=r)i+=(t[u]-t[o])*(t[o+1]+t[u+1]),u=o;return i}t.exports=n,t.exports.default=n,n.deviation=function(t,n,e,r){var i=n&&n.length,o=i?n[0]*e:t.length,u=Math.abs(O(t,0,o,e));if(i)for(var a=0,l=n.length;a<l;a++){var c=n[a]*e,f=a<l-1?n[a+1]*e:t.length;u-=Math.abs(O(t,c,f,e))}var s=0;for(a=0;a<r.length;a+=3){var g=r[a]*e,h=r[a+1]*e,p=r[a+2]*e;s+=Math.abs((t[g]-t[p])*(t[h+1]-t[g+1])-(t[g]-t[h])*(t[p+1]-t[g+1]))}return 0===u&&0===s?0:Math.abs((s-u)/u)},n.flatten=function(t){for(var n=t[0][0].length,e={vertices:[],holes:[],dimensions:n},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var u=0;u<n;u++)e.vertices.push(t[i][o][u]);i>0&&(r+=t[i-1].length,e.holes.push(r))}return e}},84676:function(t,n,e){function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}t=e.nmd(t);var i={};function o(t){return Math.floor(Math.abs(t)+.5)*(t>=0?1:-1)}function u(t,n,e){var r=(t=o(t*e))-(n=o(n*e));r<<=1,t-n<0&&(r=~r);for(var i="";r>=32;)i+=String.fromCharCode(63+(32|31&r)),r>>=5;return i+=String.fromCharCode(r+63)}function a(t){for(var n=[],e=0;e<t.length;e++){var r=t[e].slice();n.push([r[1],r[0]])}return n}i.decode=function(t,n){for(var e,r=0,i=0,o=0,u=[],a=0,l=0,c=null,f=Math.pow(10,Number.isInteger(n)?n:5);r<t.length;){c=null,a=0,l=0;do{l|=(31&(c=t.charCodeAt(r++)-63))<<a,a+=5}while(c>=32);e=1&l?~(l>>1):l>>1,a=l=0;do{l|=(31&(c=t.charCodeAt(r++)-63))<<a,a+=5}while(c>=32);i+=e,o+=1&l?~(l>>1):l>>1,u.push([i/f,o/f])}return u},i.encode=function(t,n){if(!t.length)return"";for(var e=Math.pow(10,Number.isInteger(n)?n:5),r=u(t[0][0],0,e)+u(t[0][1],0,e),i=1;i<t.length;i++){var o=t[i],a=t[i-1];r+=u(o[0],a[0],e),r+=u(o[1],a[1],e)}return r},i.fromGeoJSON=function(t,n){if(t&&"Feature"===t.type&&(t=t.geometry),!t||"LineString"!==t.type)throw new Error("Input must be a GeoJSON LineString");return i.encode(a(t.coordinates),n)},i.toGeoJSON=function(t,n){return{type:"LineString",coordinates:a(i.decode(t,n))}},"object"===r(t)&&t.exports&&(t.exports=i)},91439:function(t,n,e){e.d(n,{K:function(){return g}});var r="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n";function i(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,n){if(!t)return;if("string"==typeof t)return o(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return o(t,n)}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,a=!0,l=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){l=!0,u=t},f:function(){try{a||null==e.return||e.return()}finally{if(l)throw u}}}}function o(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}var u={lightSources:{}};function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.color,e=void 0===n?[0,0,0]:n,r=t.intensity,i=void 0===r?1:r;return e.map((function(t){return t*i/255}))}var l={name:"lights",vs:r,fs:r,getUniforms:function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;if("lightSources"in n){var e=n.lightSources||{},r=e.ambientLight,o=e.pointLights,l=e.directionalLights;return r||o&&o.length>0||l&&l.length>0?Object.assign({},function(t){var n=t.ambientLight,e=t.pointLights,r=void 0===e?[]:e,i=t.directionalLights,o=void 0===i?[]:i,u={};return u["lighting_uAmbientLight.color"]=n?a(n):[0,0,0],r.forEach((function(t,n){u["lighting_uPointLight[".concat(n,"].color")]=a(t),u["lighting_uPointLight[".concat(n,"].position")]=t.position,u["lighting_uPointLight[".concat(n,"].attenuation")]=t.attenuation||[1,0,0]})),u.lighting_uPointLightCount=r.length,o.forEach((function(t,n){u["lighting_uDirectionalLight[".concat(n,"].color")]=a(t),u["lighting_uDirectionalLight[".concat(n,"].direction")]=t.direction})),u.lighting_uDirectionalLightCount=o.length,u}({ambientLight:r,pointLights:o,directionalLights:l}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in n){var c,f={pointLights:[],directionalLights:[]},s=i(n.lights||[]);try{for(s.s();!(c=s.n()).done;){var g=c.value;switch(g.type){case"ambient":f.ambientLight=g;break;case"directional":f.directionalLights.push(g);break;case"point":f.pointLights.push(g)}}}catch(t){s.e(t)}finally{s.f()}return t({lightSources:f})}return{}},defines:{MAX_LIGHTS:3}},c="\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",f={};function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f;if(!("material"in t))return{};var n=t.material;return n?function(t){var n=t.ambient,e=void 0===n?.35:n,r=t.diffuse,i=void 0===r?.6:r,o=t.shininess,u=void 0===o?32:o,a=t.specularColor;return{lighting_uAmbient:e,lighting_uDiffuse:i,lighting_uShininess:u,lighting_uSpecularColor:(void 0===a?[30,30,30]:a).map((function(t){return t/255}))}}(n):{lighting_uEnabled:!1}}var g={name:"gouraud-lighting",dependencies:[l],vs:c,defines:{LIGHTING_VERTEX:1},getUniforms:s}}}]);
//# sourceMappingURL=https://sourcemaps.uberinternal.com/raw/uber-sites/client-legacy-legacy-4983-3025bfac9b70fe8d.js.map