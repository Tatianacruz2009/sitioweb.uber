"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[1494,4166],{3:(e,t,n)=>{n.d(t,{O:()=>r});var o=n(90417),a=n(35002);const l={currentLocation:null,error:null},i=()=>{var e;return(null===(e=window)||void 0===e||null===(e=e.navigator)||void 0===e||null===(e=e.permissions)||void 0===e?void 0:e.query({name:"geolocation"}))||{state:"denied"}};function r(e){let{skipPermissionCheck:t}=e;const[n,r]=o.useState(!1),[d,s]=o.useState(null),c=o.useRef(l),u=o.useRef(null),p=o.useCallback((async()=>{const{state:e}=await i();return s(e),e}),[]),v=o.useCallback((()=>(u.current||(u.current=new Promise((e=>{r(!0),(0,a.L)((t=>{r(!1),s("granted"),c.current={currentLocation:t,error:null},e(t)}),(t=>{var n;r(!1),s("undefined"!=typeof GeolocationPositionError&&t.code===(null===(n=GeolocationPositionError)||void 0===n?void 0:n.PERMISSION_DENIED)?"denied":"granted"),c.current={currentLocation:null,error:t},e(null)}))}))),u.current)),[]);return o.useEffect((()=>{p().then((e=>{(t||"granted"===e)&&v()}))}),[]),{...c.current,loading:n,permissionState:d,promptUserForLocation:v}}},35002:(e,t,n)=>{n.d(t,{L:()=>o});const o=(e,t)=>{var n;null!==(n=window)&&void 0!==n&&null!==(n=n.navigator)&&void 0!==n&&null!==(n=n.geolocation)&&void 0!==n&&n.getCurrentPosition?window.navigator.geolocation.getCurrentPosition((n=>{n&&n.coords&&n.coords.latitude&&n.coords.longitude?e(n.coords):null==t||t({code:100,message:"Received invalid position from Geolocation API"})}),t):null==t||t({code:101,message:"Geolocation API is not available"})}},52556:(e,t,n)=>{n.d(t,{j:()=>o});const o=e=>{if((e=>"keydown"===e.type&&("Enter"===(null==e?void 0:e.code)||"Space"===(null==e?void 0:e.code)))(e)){var t,n;e.preventDefault();const o=new MouseEvent("click",{bubbles:!0,cancelable:!0});null===(t=e.target)||void 0===t||null===(n=t.dispatchEvent)||void 0===n||n.call(t,o)}}},52964:(e,t,n)=>{n.d(t,{a:()=>Lt});var o=n(90417),a=n(92398),l=n(35259);function i(e,t){return"".concat(e,":").concat(t.pudoKey)}function r(e){return"pickup"===e?"PICKUP":"DROPOFF"}const d=e=>{if(!e)return;const t=parseInt(e);return t&&t>=0&&t<=100?"".concat(t,"vh"):void 0};var s=n("__fusion__95b4ba69e5"),c=n(43065),u=n(47633),p=n(56216),v=n(77314),m=n(14299);const f=500;function h(e){var t;let{debounceMsec:n=f,internalStateKey:o,latitude:a,longitude:l,sendRequestHook:i,skipDataFetching:r=!1,type:d,value:c}=e;const u=s.useRef(),[p,v]=s.useState({latitude:a,longitude:l,query:String(c),type:d}),{loading:h}=i(p),g=s.useContext(m.oD),b=s.useContext(m.KH);s.useEffect((()=>{let e;e=h?{...g[o],loading:!0}:{loading:!1,variables:p},e&&b(o,e)}),[p,h]),s.useEffect((()=>(r||(u.current=setTimeout((()=>{v({latitude:a,longitude:l,query:String(c),type:d})}),n)),()=>{clearTimeout(u.current)})),[n,a,l,d,r,c]),s.useEffect((()=>{var e;null!==(e=g["".concat(o)])&&void 0!==e&&null!==(e=e.variables)&&void 0!==e&&e.isUserTriggeredFallback&&v({isUserTriggeredFallback:!0,latitude:a,longitude:l,query:String(c),type:d})}),[null===(t=g["".concat(o)])||void 0===t||null===(t=t.variables)||void 0===t?void 0:t.isUserTriggeredFallback])}var g=n(40014);var b=n(9648),S=n(90720),R=n(28013);let k=function(e){return e.utf="utf",e.simpleSavedPlaces="simpleSavedPlaces",e}({}),y=function(e){return e[e.pudoFlights=12e5]="pudoFlights",e[e.pudoLocationSearch=12e5]="pudoLocationSearch",e[e.pudoResolveLocation=12e5]="pudoResolveLocation",e}({});const C={ListItem:{Content:{verticalPaddingScale:{[R.SK.mini]:"scale300",[R.SK.compact]:"scale400",[R.SK.default]:"scale500",[R.SK.large]:"scale500"}}},StyledIconContainer:{fontSize:{[R.SK.mini]:"12px",[R.SK.compact]:"14px",[R.SK.default]:"16px",[R.SK.large]:"16px"},height:{[R.SK.mini]:"28px",[R.SK.compact]:"32px",[R.SK.default]:"36px",[R.SK.large]:"38px"}},StyledLabelContent:{[R.SK.mini]:"LabelSmall",[R.SK.compact]:"LabelSmall",[R.SK.default]:"LabelMedium",[R.SK.large]:"LabelMedium"},StyledLabelDescription:{[R.SK.mini]:"ParagraphXSmall",[R.SK.compact]:"ParagraphSmall",[R.SK.default]:"ParagraphSmall",[R.SK.large]:"ParagraphSmall"}},I="default",P="inverse",w="none",x="noneWithTertiary",E="list-item",A={add:{root:"add"},edit:{addressInput:"address-input",addressResults:"address-results",deleteButton:"delete-button",nameInput:"name-input",root:"edit",saveButton:"save-button"},list:{addItem:"add-item",editItem:"saved-places.modal.list.edit-item",root:"list"},root:{modal:"saved-places.modal",result:"saved-places.result",row:"saved-places.row"},row:{listButton:"list-button",resultButton:"saved-places.row.result-button"}},L={"property-standard-customEventName":"click"},H=e=>{let{clickable:t=!0,disabled:n=!1,size:o,testid:a}=e;return{ArtworkContainer:{style:{flexShrink:0}},Content:{style:e=>{let{$theme:t}=e;return{boxSizing:"border-box",paddingBottom:t.sizing[C.ListItem.Content.verticalPaddingScale[o]],paddingTop:t.sizing[C.ListItem.Content.verticalPaddingScale[o]]}}},EndEnhancerContainer:{style:e=>{let{$theme:t}=e;return{color:t.colors.contentPrimary}}},Root:{props:{"data-testid":a||"pudo-result"},style:e=>{let{$theme:o}=e;return{"@media (pointer: fine)":{":hover":{backgroundColor:n?o.colors.backgroundPrimary:o.colors.backgroundSecondary}},backgroundColor:o.colors.backgroundPrimary,button:{pointerEvents:"initial"},cursor:n?"not-allowed":t?"pointer":"unset",opacity:n?.7:1,pointerEvents:t?"auto":"none"}}}}},T={Input:{props:{type:"search"}},Root:{props:{"data-testid":"pudo-input-v2"}}},Y={alignItems:"center",display:"flex",flexDirection:"row"},D=s.forwardRef(((e,t)=>{let{debounceMsec:n,latitude:o,longitude:a,overrides:l,sendRequestHook:i,skipDataFetching:r,stateKey:d,type:s,value:c,...u}=e;return h({debounceMsec:n,internalStateKey:(0,m.IU)(d,m.xo.locationSearch),latitude:o,longitude:a,sendRequestHook:i,skipDataFetching:r,type:s,value:String(c)}),(0,g.Y)(S.A,{...u,inputRef:t,overrides:(0,b.Qp)(T,l),value:c})}));D.displayName="PudoLocationSearchInputComponent";const O=D;var _=n(84385),K=n(57969),z=n(6697),N=n(36481),F=n("__fusion__55bcab8f00"),B=n(90819),U=n(98819);const M="scale700",$="calc(100vh - 80px)",V={Dialog:{style:e=>{let{$theme:t}=e;return{"::-webkit-scrollbar":{display:"none !important"},borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",borderTopLeftRadius:t.borders.radius400,borderTopRightRadius:t.borders.radius400,marginBottom:"0px",marginLeft:"0px",marginRight:"0px",marginTop:"0px",maxHeight:$,overflowY:"auto",width:"100%",["@media screen and (min-width: ".concat(t.breakpoints.medium,"px)")]:{borderBottomLeftRadius:t.borders.radius400,borderBottomRightRadius:t.borders.radius400,marginBottom:"initial",marginLeft:"initial",marginRight:"initial",marginTop:"initial",width:"500px"}}}},DialogContainer:{style:e=>{let{$theme:t}=e;return{alignItems:"flex-end",["@media screen and (min-width: ".concat(t.breakpoints.medium,"px)")]:{alignItems:"center"}}}}},q=(e,t,n)=>({paddingBottom:e.sizing[M],paddingLeft:e.sizing[M],paddingRight:e.sizing[M],paddingTop:n?e.sizing[M]:"0px",...t?(0,v.d2)(e.borders.border600,"Top"):{},["@media screen and (min-width: ".concat(e.breakpoints.medium,"px)")]:{borderTopWidth:"0px",paddingTop:"0px"}}),W=e=>({height:e?"100%":"auto",maxHeight:$,overflow:"hidden"}),Z=e=>({"::-webkit-scrollbar":{display:"none !important"},height:e?"100vh":"inherit",overflowY:"scroll"}),j=e=>({display:"flex",flexDirection:"row",justifyContent:"center",textAlign:"center",["@media screen and (min-width: ".concat(e.breakpoints.medium,"px)")]:{justifyContent:"normal"}}),G=e=>({paddingBottom:e.sizing[M],paddingLeft:e.sizing.scale1400,paddingRight:e.sizing.scale1400,paddingTop:e.sizing[M],...(0,v.d2)(e.borders.border600,"Bottom"),["@media screen and (min-width: ".concat(e.breakpoints.medium,"px)")]:{borderBottomWidth:"0px",paddingBottom:"0px",...(0,v.PV)(e,M),...(0,v.CJ)(e,"scale1400")}});var Q=n(17070);const J=o.forwardRef(((e,t)=>o.createElement(Q.A,{display:"flex",flexDirection:"column",...e,ref:t})));J.displayName="Column";o.forwardRef(((e,t)=>o.createElement(Q.A,{display:"flex",flexDirection:"row",...e,ref:t}))).displayName="Row";(0,c.I4)("div",(e=>{let{$width:t}=e;return{display:"flex",flexShrink:0,width:"".concat(t,"px")}}));function X(e){let{autoFocus:t,bottomContent:n,children:a,closeable:l=!0,isFullHeight:i=!1,isFullSize:r=!1,isOpen:d,onClose:s,overrides:u={},renderBottomContentBorder:p=!0,renderBottomContentPaddingTop:v=!0,scrollToBottom:m=!1,scrollToBottomDelay:f=2e3,subtitle:h,title:S,...R}=e;const k=o.useRef(null),[y,C]=(0,c.c6)();return o.useEffect((()=>{let e;return d&&m&&(e=setTimeout((()=>{var e;null==k||null===(e=k.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),f)),()=>clearTimeout(e)}),[d,m,f]),(0,g.Y)(B.A,{...R,animate:!0,autoFocus:t,closeable:l,isOpen:d,onClose:s,overrides:(0,b.Qp)(V,u),children:(0,g.FD)(J,{className:y(W(i)),children:[Boolean(S||h)&&(0,g.FD)(J,{className:y(G(C)),children:[S&&(0,g.Y)(U.Sm,{className:y(j(C)),overrides:{Block:{props:{"data-testid":"common.modal.title"}}},children:S}),h&&(0,g.Y)(U.oS,{className:y(j(C)),color:"contentSecondary",children:h})]}),(0,g.FD)(J,{className:y(Z(r)),children:[a,(0,g.Y)("span",{ref:k})]}),n&&(0,g.Y)(J,{className:y(q(C,p,v)),children:n})]})})}var ee=n(84580),te=n(50083);const ne={label:"",place:null};function oe(e){return{payload:e,type:"SET_LABEL"}}function ae(e){return{payload:e,type:"SET_PLACE"}}function le(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LABEL":return{...e,label:t.payload};case"SET_PLACE":return{...e,place:t.payload};default:return e}}const ie=o.createContext((()=>{})),re=o.createContext(ne);function de(e){let{children:t,initialState:n}=e;const[a,l]=o.useReducer(le,n||ne);return(0,g.Y)(ie.Provider,{value:l,children:(0,g.Y)(re.Provider,{value:a,children:t})})}const se={display:"flex",flexDirection:"column",height:"80vh",overflow:"auto"},ce=e=>({marginLeft:e.sizing.scale600,marginRight:e.sizing.scale600}),ue={flex:1,overflow:"auto"},pe={BaseButton:{style:e=>{let{$theme:t}=e;return{color:t.colors.negative}}}},ve={EmptyState:{component:()=>null},List:{props:{"data-tracking-name":A.edit.addressResults},style:{borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",boxShadow:"none",paddingBottom:"0px",paddingTop:"0px",...v.s7,":focus":{outline:"none !important"}}}};var me=n(12992),fe=n("__fusion__91d49e1bad"),he=n("__fusion__d33d0696fd");Object.freeze({HIGH:"HIGH",LOW:"LOW",UNKNOWN:"UNKNOWN"}),Object.freeze({ARRIVAL:"ARRIVAL",DEPARTURE:"DEPARTURE"}),Object.freeze({ACCELERATOR:"ACCELERATOR",CACHE:"CACHE",DEFAULT_DEVICE:"DEFAULT_DEVICE",EXTERNAL:"EXTERNAL",MANUAL:"MANUAL",SEARCH:"SEARCH",SUGGESTED:"SUGGESTED",VENUE:"VENUE"});const ge=Object.freeze({DROPOFF:"DROPOFF",PICKUP:"PICKUP"}),be=Object.freeze({AIRPORT:"AIRPORT",FAVORITE:"FAVORITE",HOME:"HOME",HOTEL:"HOTEL",PERSONALIZATION:"PERSONALIZATION",RESTAURANT:"RESTAURANT",WORK:"WORK"});Object.freeze({ACCELERATOR:"ACCELERATOR",AIRPORT_REFINEMENT:"AIRPORT_REFINEMENT",AUTOCOMPLETE:"AUTOCOMPLETE",DESTINATION:"DESTINATION",LOCATION:"LOCATION",ORIGIN:"ORIGIN"}),Object.freeze({HOT_SPOT:"HOT_SPOT",MINIMAL:"MINIMAL",ZONE:"ZONE"});function Se(e){var t,n;let{enableSavedPlaces:o,renderRowOrder:a=e=>e,renderUtfRow:l=!0,stateKey:i,useResultsHook:r,isReverseSavedPlaces:d}=e;const c=(0,N.c)(),u=(0,m.IU)(i,m.xo.locationSearch),{[u]:p}=s.useContext(m.oD),v=Boolean(null==p||null===(t=p.variables)||void 0===t?void 0:t.isUserTriggeredFallback),f=!(null==p||null===(n=p.variables)||void 0===n?void 0:n.query);let h=a(r({cacheKey:"pudoLocationSearch",internalStateKey:u}));var g;!l||v||f||(h=h.concat({addressLine1:c("pudo.utf.row.title",{query:null==p||null===(g=p.variables)||void 0===g?void 0:g.query}),artwork:fe.A,id:k.utf}));if(f&&o){const e=h.find((e=>{var t;return"savedPlacesMeta"in e&&(null==e||null===(t=e.savedPlacesMeta)||void 0===t?void 0:t.tag)===be.HOME})),t=h.find((e=>{var t;return"savedPlacesMeta"in e&&(null==e||null===(t=e.savedPlacesMeta)||void 0===t?void 0:t.tag)===be.WORK}));d?h=h.concat([{addressLine1:c("pudo.savedplaces.row.button.list"),artwork:he.A,disabled:!1,id:k.simpleSavedPlaces}]):(h=h.filter((n=>n!==e&&n!==t)),h=[{disabled:!0,home:e,isSavedPlacesRow:!0,work:t}].concat(h))}return h}var Re=n(40673),ke=n(60255),ye=n("__fusion__5bde47abd4"),Ce=n("__fusion__f822297826"),Ie=n("__fusion__3ba13bc820"),Pe=n("__fusion__17746f7a17");const we=o.forwardRef((function(e,t){let{title:n="Home",titleId:o,size:a="1em",...l}=e;return(0,g.FD)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",ref:t,"aria-labelledby":o,...l,children:[void 0===n?(0,g.Y)("title",{id:o,children:"Home"}):n?(0,g.Y)("title",{id:o,children:n}):null,(0,g.Y)("path",{d:"M12 1 2 10.1V23h7v-8h6v8h7V10.1L12 1Z",fill:"currentColor"})]})}));var xe=n("__fusion__5936b59acc"),Ee=n("__fusion__bf7c9fec80");const Ae=(0,c.I4)("div",(e=>{let{$theme:t}=e;return{marginRight:t.sizing.scale200}})),Le=(0,c.I4)("div",(e=>{let{$theme:t}=e;return{display:"flex",justifyContent:"center",marginBottom:t.sizing.scale1000,marginTop:t.sizing.scale1000}})),He=(0,c.I4)("div",{display:"flex",flexDirection:"row"}),Te=(0,c.I4)("div",(e=>{let{$backgroundColor:t,$theme:n,$size:o,$flipRtl:a=!0}=e;return{alignItems:"center",backgroundColor:t===P?n.colors.backgroundInversePrimary:t===w||t===x?"unset":n.colors.backgroundTertiary,borderRadius:"50%",color:t===P?n.colors.contentInversePrimary:t===x?n.colors.contentTertiary:n.colors.contentPrimary,display:"flex",flexDirection:"column",flexShrink:0,fontSize:C.StyledIconContainer.fontSize[o],height:C.StyledIconContainer.height[o],justifyContent:"center",transform:a&&"rtl"===n.direction?"rotate(180deg)":"initial",width:C.StyledIconContainer.height[o]}})),Ye=((0,c.I4)("span",(e=>{let{$theme:t}=e;return{color:t.colors.contentPositive}})),(0,c.I4)("p",(e=>{let{$numberOfLines:t,$size:n,$theme:o}=e;return{color:o.colors.contentPrimary,marginBottom:0,marginTop:0,...o.typography[C.StyledLabelContent[n]],...(0,v.w8)(t)}}))),De=(0,c.I4)("p",(e=>{let{$colorContentSecondary:t,$numberOfLines:n,$size:o,$theme:a}=e;return{color:t?a.colors.contentSecondary:a.colors.contentPrimary,marginBottom:0,marginTop:0,...a.typography[C.StyledLabelDescription[o]],...(0,v.w8)(n)}}));const Oe={Root:{style:e=>{let{$theme:t}=e;return{marginTop:t.sizing.scale100}}}},_e=s.forwardRef(((e,t)=>{var n;let{item:{clickable:o=!0,...a},$size:l,...i}=e;const r=l||R.SK.default;let d,s;var c;null!=a&&null!==(n=a.savedPlacesMeta)&&void 0!==n&&n.label?(d=null==a||null===(c=a.savedPlacesMeta)||void 0===c?void 0:c.label,s=null==a?void 0:a.addressLine1):(d=null==a?void 0:a.addressLine1,s=null==a?void 0:a.addressLine2);return(0,g.Y)(Re.A,{...i,ref:t,artwork:()=>{var e,t;const n=(null==a?void 0:a.artwork)||function(e){switch(e){case be.AIRPORT:return ye.A;case be.FAVORITE:return he.A;case be.HOME:return we;case be.HOTEL:return Ce.A;case be.PERSONALIZATION:return Pe.A;case be.RESTAURANT:return Ee.A;case be.WORK:return Ie.default;default:return xe.A}}(null!==(e=null==a||null===(t=a.savedPlacesMeta)||void 0===t?void 0:t.tag)&&void 0!==e?e:null==a?void 0:a.tag);return(0,g.Y)(Te,{$backgroundColor:null!=a&&a.inverseArtworkColor?P:I,$size:r,children:null!=a&&a.loading?(0,g.Y)(ke.A,{animation:!0}):(0,g.Y)(n,{})})},endEnhancer:(null==a?void 0:a.endEnhancer)||i.endEnhancer,overrides:(0,b.Qp)(H({clickable:o,disabled:null==a?void 0:a.disabled,size:r,testid:null==a?void 0:a.testid}),i.overrides),children:(0,g.Y)("div",{"data-tracking-name":i["data-tracking-name"]||E,style:{width:"100%"},children:null!=a&&a.loading?(0,g.Y)(Ke,{}):(0,g.FD)(g.FK,{children:[(0,g.Y)(Ye,{$numberOfLines:1,$size:r,children:d}),s&&(0,g.Y)(De,{$colorContentSecondary:!1,$numberOfLines:2,$size:r,children:s})]})})})})),Ke=()=>(0,g.FD)(g.FK,{children:[(0,g.Y)(ke.A,{animation:!0,rows:1,width:"100%"}),(0,g.Y)(ke.A,{animation:!0,overrides:Oe,rows:1,width:"75%"})]});_e.displayName="PudoListItem";const ze=_e;var Ne=n(41101),Fe=n(90411);function Be(e){switch(e){case be.HOME:return we;case be.WORK:return Ie.default;default:return xe.A}}function Ue(e){var t,n;let{item:o,onSelect:a}=e;const l=(0,Ne.Am)(Fe.uU);return(0,g.Y)(Ae,{children:(0,g.Y)(p.A,{kind:u.Nd.secondary,onClick:e=>{e.stopPropagation(),null==a||a({event:e,item:o}),null==l||l.track("click.".concat(A.row.resultButton),null,null,L)},shape:u.IW.pill,size:u.SK.compact,startEnhancer:Be((null===(t=o.savedPlacesMeta)||void 0===t?void 0:t.tag)||o.tag),children:null===(n=o.savedPlacesMeta)||void 0===n?void 0:n.label})})}function Me(e){let{onClick:t}=e;return(0,g.Y)(p.A,{"data-tracking-name":A.row.listButton,kind:u.Nd.secondary,onClick:t,shape:u.IW.pill,size:u.SK.compact,startEnhancer:he.A,children:(0,g.Y)(te.H,{id:"pudo.savedplaces.row.button.list"})})}const $e=s.forwardRef(((e,t)=>{let{item:n,...o}=e;const[,a]=s.useContext(pt);return(0,g.Y)(Re.A,{...o,ref:t,overrides:H({clickable:!1,disabled:!1,size:R.SK.default,testid:null==n?void 0:n.testid}),children:(0,g.FD)(He,{"data-tracking-name":A.root.row,children:[(null==n?void 0:n.home)&&(0,g.Y)(Ue,{item:n.home,onSelect:o.onSelect}),(null==n?void 0:n.work)&&(0,g.Y)(Ue,{item:n.work,onSelect:o.onSelect}),(0,g.Y)(Me,{onClick:()=>{a(!0)}})]})})}));$e.displayName="PudoSavedPlacesListItem";const Ve=$e;const qe=o.forwardRef(((e,t)=>e.item.isSavedPlacesRow?(0,g.Y)(Ve,{ref:t,...e}):(0,g.Y)(ze,{ref:t,...e})));function We(e){let{onSelect:t,size:n=R.SK.default}=e;return{Option:{props:{$size:n,onSelect:t,overrides:{ListItem:qe}}}}}function Ze(e){let{onSelect:t}=e;return{DropdownListItem:{component:qe,props:{$size:R.SK.default,onSelect:t}}}}function je(e){let{disabled:t,enableSavedPlaces:n,modalZIndex:a,overrides:l,renderRowOrder:i,renderUtfRow:r,sendRequestHook:d,size:s,stateKey:c,useResultsHook:u,useSavedPlacesHook:p,useDeleteSavedPlaceHook:v,useUpsertSavedPlaceHook:f,isReverseSavedPlaces:h,...S}=e;const R=(0,m.IU)(c,m.xo.locationSearch),{[R]:y}=o.useContext(m.oD),C=o.useContext(m.KH),[,I]=o.useContext(pt);let P=Se({enableSavedPlaces:n,isReverseSavedPlaces:h,renderRowOrder:i,renderUtfRow:r,stateKey:c,useResultsHook:u});t&&(P=P.map((e=>({...e,disabled:!0}))));const w=e=>{var t;e.item.id!==k.utf?e.item.id!==k.simpleSavedPlaces?null===(t=S.onItemSelect)||void 0===t||t.call(S,e):I(!0):null!=y&&y.variables&&C(R,{...y,variables:{...y.variables,isUserTriggeredFallback:!0}})};return(0,g.FD)(g.FK,{children:[(0,g.Y)(mt,{onSelect:w,sendRequestHook:d,stateKey:c,useDeleteSavedPlaceHook:v,useResultsHook:u,useSavedPlacesHook:p,useUpsertSavedPlaceHook:f,zIndex:a}),(0,g.Y)(me.A,{...S,items:P,onItemSelect:t?void 0:w,overrides:(0,b.Qp)(We({onSelect:w,size:s}),l)})]})}function Ge(e){return(0,g.Y)(vt,{children:(0,g.Y)(je,{...e})})}qe.displayName="OverrideListItem";const Qe="__internal_saved_places_upsert__";function Je(e){let{sendRequestHook:t,stateKey:n,type:a,useResultsHook:l,useSavedPlacesHook:i,useDeleteSavedPlaceHook:r,useUpsertSavedPlaceHook:d}=e;const[s,u]=(0,c.c6)(),p=(0,N.c)(),v=o.useContext(ie),{label:f,place:h}=o.useContext(re),[b,R]=o.useState((null==h?void 0:h.addressLine1)||""),k=(0,m.IU)(n,m.xo.locationSearch),{[k]:y}=o.useContext(m.oD),{latitude:C,longitude:I}=(null==y?void 0:y.variables)||{};return(0,g.FD)("div",{className:s(se),"data-tracking-name":a===ut.EDIT?A.edit.root:A.add.root,children:[(0,g.FD)("div",{className:s(ce(u)),children:[(0,g.Y)(ee.A,{label:p("pudo.savedplaces.add.name.label"),children:(0,g.Y)(S.A,{autoFocus:!0,clearOnEscape:!0,disabled:a===ut.EDIT,id:"saved-places-add-name",onChange:e=>v(oe(e.target.value)),overrides:{Input:{props:{"data-tracking-name":A.edit.nameInput}}},placeholder:"",value:f})}),(0,g.Y)(ee.A,{label:p("pudo.savedplaces.add.address.label"),children:(0,g.Y)(O,{id:"saved-places-add-address",latitude:null!=C?C:0,longitude:null!=I?I:0,onChange:e=>R(e.target.value),overrides:{Input:{props:{"data-tracking-name":A.edit.addressInput}}},sendRequestHook:t,stateKey:Qe,type:ge.PICKUP,value:b})})]}),(0,g.Y)("div",{className:s(ue),children:(0,g.Y)(Ge,{enableSavedPlaces:!1,onItemSelect:e=>{let{item:t}=e;v(ae(t)),null!=t&&t.addressLine1&&R(null==t?void 0:t.addressLine1)},overrides:ve,sendRequestHook:t,stateKey:Qe,useDeleteSavedPlaceHook:r,useResultsHook:l,useSavedPlacesHook:i,useUpsertSavedPlaceHook:d})})]})}function Xe(e){let{disabled:t,loading:n,onClick:o}=e;return(0,g.Y)(p.A,{"data-tracking-name":A.edit.saveButton,disabled:t,isLoading:n,onClick:o,children:(0,g.Y)(te.H,{id:"pudo.savedplaces.add.save"})})}function et(e){let{disabled:t,loading:n,onClick:o}=e;return(0,g.Y)(p.A,{"data-tracking-name":A.edit.deleteButton,disabled:t,isLoading:n,kind:u.Nd.secondary,onClick:o,overrides:pe,children:(0,g.Y)(te.H,{id:"pudo.savedplaces.edit.delete"})})}var tt=n(73744),nt=n(91587),ot=n(50207);function at(e){let{isOpen:t,zIndex:n,onConfirm:o,onCancel:a}=e;const l={Root:{style:{zIndex:n}}};return(0,g.FD)(B.A,{autoFocus:!0,isOpen:t,overrides:l,size:tt.SK.default,children:[(0,g.Y)(nt.rQ,{children:(0,g.Y)(te.H,{id:"pudo.savedplaces.edit.delete"})}),(0,g.Y)(nt.cw,{children:(0,g.Y)(te.H,{id:"pudo.savedplaces.delete.confirm.text"})}),(0,g.FD)(nt.jl,{children:[(0,g.Y)(ot.A,{kind:u.Nd.tertiary,onClick:a,children:(0,g.Y)(te.H,{id:"common.buttons.cancel"})}),(0,g.Y)(ot.A,{"data-testid":"pudo.savedplaces.edit.delete.confirm",onClick:o,children:(0,g.Y)(te.H,{id:"pudo.savedplaces.edit.delete"})})]})]})}var lt=n(5485),it=n("__fusion__8672dec7d9");function rt(e){let{fetchSavedPlaces:t,loading:n,onClickAddPlace:o,onClickEditPlace:a,onSelect:l,places:i}=e;const r=(0,Ne.Am)(Fe.uU),d=(0,N.c)();return s.useEffect((()=>{i||t()}),[t,i]),n?(0,g.Y)(Le,{children:(0,g.Y)(lt.y,{})}):(0,g.FD)("ul",{"data-tracking-name":A.list.root,style:{paddingLeft:"0px"},children:[null==i?void 0:i.map((e=>{const t=t=>{t.stopPropagation(),a({item:e}),null==r||r.track("click.".concat(A.list.editItem),null,null,L)};return(0,g.FD)(ze,{endEnhancer:()=>(0,g.Y)(p.A,{kind:"secondary",onClick:t,shape:"pill",size:"compact",children:d("pudo.savedplaces.list.item.action")}),item:e,onClick:()=>{l({item:e})},role:"option",children:[(0,g.Y)(g.FK,{})," "]},e.id)})),(0,g.Y)(dt,{onClick:o})]})}const dt=e=>{let{onClick:t}=e;const n={addressLine1:(0,N.c)()("pudo.savedplaces.list.addplace"),artwork:it.A,id:"add_saved_place"};return(0,g.FD)(ze,{"data-tracking-name":A.list.addItem,item:n,onClick:t,role:"option",children:[(0,g.Y)(g.FK,{})," "]})},st={BaseButton:{style:e=>{let{$theme:t}=e;return{marginRight:t.sizing.scale200,position:"absolute",transform:"rotate(".concat("rtl"===t.direction?180:0,"deg)"),["".concat("rtl"===t.direction?"right":"left")]:t.sizing.scale600,["@media screen and (min-width: ".concat(t.breakpoints.medium,"px)")]:{position:"initial"}}}}},ct={deleteButtonContainer:e=>({display:"flex",flexDirection:"column",marginTop:e.sizing.scale400})};let ut=function(e){return e.ADD="ADD",e.EDIT="EDIT",e.LIST="LIST",e}({});const pt=s.createContext([!1,()=>{}]);function vt(e){let{children:t,isOpen:n}=e;const[o,a]=s.useState(null!=n&&n);return(0,g.Y)(pt.Provider,{value:[o,a],children:(0,g.Y)(de,{children:t})})}function mt(e){let{onSelect:t,sendRequestHook:n,stateKey:o,useResultsHook:a,useSavedPlacesHook:l,useDeleteSavedPlaceHook:i,useUpsertSavedPlaceHook:r,zIndex:d=3}=e;const[v,m]=(0,c.c6)(),f=(0,N.c)(),[h,b]=s.useState(ut.LIST),[S,R]=s.useState(!1),[k,y]=s.useContext(pt),C=s.useContext(ie),{label:I,place:P}=s.useContext(re),[w,{error:x,loading:E}]=i({label:I}),[L,{error:H,loading:T}]=r({label:I,placeId:(null==P?void 0:P.id)||""}),[D,{data:O,error:_,loading:K,refetch:B}]=l(),U=s.useCallback((()=>{C(oe("")),b(ut.LIST),y(!1)}),[C,y]);s.useEffect((()=>{if(_||H||x){try{z.A.negative(f("common.generic.error.message"))}catch(e){0}_&&U()}}),[_,x,H,U,f]);const M=()=>{R(!1),b(ut.LIST),C(oe("")),C(ae(null))},$={Root:{props:{"data-scene-meta":JSON.stringify({modal_id:"rv_web_pudo.saved_places",presentation_style:"modal"}),"data-tracking-name":A.root.modal},style:{zIndex:d}}};return(0,g.Y)(X,{bottomContent:h===ut.ADD||h===ut.EDIT?(0,g.FD)(g.FK,{children:[(0,g.Y)(Xe,{disabled:!I||!P||E,loading:T,onClick:async()=>{try{await L()}catch(e){}B(),M()}}),h===ut.EDIT&&(0,g.FD)("div",{className:v(ct.deleteButtonContainer(m)),children:[(0,g.Y)(et,{disabled:T,loading:E,onClick:()=>R(!0)}),(0,g.Y)(at,{isOpen:S,onCancel:()=>R(!1),onConfirm:async()=>{R(!1);try{await w()}catch(e){}B(),M()},zIndex:d+1})]})]}):null,isOpen:k,onClose:U,overrides:$,title:h===ut.LIST?f("pudo.savedplaces.list.title"):(0,g.FD)("div",{className:v(Y),children:[(0,g.Y)(p.A,{kind:u.Nd.secondary,onClick:M,overrides:st,shape:u.IW.circle,size:u.SK.compact,children:(0,g.Y)(F.A,{})}),h===ut.ADD?f("pudo.savedplaces.add.title"):f("pudo.savedplaces.edit.title",{label:I})]}),children:h===ut.LIST?(0,g.Y)(rt,{fetchSavedPlaces:D,loading:K,onClickAddPlace:()=>{b(ut.ADD)},onClickEditPlace:e=>{var t;let{item:n}=e;C(oe((null===(t=n.savedPlacesMeta)||void 0===t?void 0:t.label)||"")),C(ae(n)),b(ut.EDIT)},onSelect:e=>{let{item:n}=e;null==t||t({item:n}),U()},places:O}):(0,g.Y)(Je,{sendRequestHook:n,stateKey:o,type:h,useDeleteSavedPlaceHook:i,useResultsHook:a,useSavedPlacesHook:l,useUpsertSavedPlaceHook:r})})}function ft(e){let{onSelect:t}=e;return{...Ze({onSelect:t}),Root:{props:{"data-testid":"pudo-select-v2"}}}}const ht=s.forwardRef(((e,t)=>{let{debounceMsec:n,enableSavedPlaces:o,filterOptions:a=e=>e,latitude:l,longitude:i,maxDropdownHeight:r,modalZIndex:d,onChange:c,onInputChange:u,overrides:p,renderRowOrder:v,renderUtfRow:f,sendRequestHook:S,stateKey:R,type:y,useResultsHook:C,useSavedPlacesHook:I,useDeleteSavedPlaceHook:P,useUpsertSavedPlaceHook:w,value:x,...E}=e;const[A,L]=s.useState((null==x?void 0:x.addressLine1)||""),H=(0,m.IU)(R,m.xo.locationSearch),{[H]:T}=s.useContext(m.oD),Y=s.useContext(m.KH);h({debounceMsec:n,internalStateKey:H,latitude:l,longitude:i,sendRequestHook:S,type:y,value:A});const D=e=>{var n;if((null===(n=e.option)||void 0===n?void 0:n.id)!==k.utf){var o,a;if(c(e),"object"==typeof t)null==t||null===(o=t.current)||void 0===o||o.setDropdownOpen(!1),null==t||null===(a=t.current)||void 0===a||a.setInputValue("");e.option||L("")}else null!=T&&T.variables&&Y(H,{...T,variables:{...T.variables,isUserTriggeredFallback:!0}})},O=e=>{let{item:t}=e;return D({option:t,type:"select",value:[t]})},z=Se({enableSavedPlaces:o,renderRowOrder:v,renderUtfRow:f,stateKey:R,useResultsHook:C});return(0,g.FD)(vt,{children:[(0,g.Y)(mt,{onSelect:O,sendRequestHook:S,stateKey:R,useDeleteSavedPlaceHook:P,useResultsHook:C,useSavedPlacesHook:I,useUpsertSavedPlaceHook:w,zIndex:d}),(0,g.Y)(_.A,{...E,closeOnSelect:!1,controlRef:t,creatable:!1,escapeClearsValue:!0,filterOptions:a,labelKey:"addressLine1",maxDropdownHeight:r||"60vh",onChange:D,onInputChange:e=>{L(e.target.value),u&&u(e)},onSelectResetsInput:!1,options:z,overrides:(0,b.Qp)(ft({onSelect:O}),p),searchable:!0,type:K.ZE.search,value:x?[x]:[],valueKey:"id"})]})}));ht.displayName="LocationSearchSelect";const gt=ht;function bt(e){return 0!==e.latitude||0!==e.longitude}var St=n(73351);const{useRpcQuery:Rt,useRpcMutation:kt}=(0,St.h)();const yt=e=>{let{label:t}=e;const{mutateAsync:n,data:a,isError:l,isPending:i}=kt("deleteSavedPlace");return[o.useCallback((()=>n({label:t})),[t,n]),{data:Boolean(a),error:l,loading:i}]},Ct=()=>{const[e,t]=o.useState(!1),{data:n,isFetching:a,isError:l,refetch:i}=Rt("savedPlaces",{},{enabled:e,gcTime:0});return[o.useCallback((()=>{t(!0)}),[]),{data:n,error:l,loading:a,refetch:i}]},It=e=>{let{label:t,placeId:n}=e;const{mutateAsync:a,data:l,isError:i,isPending:r}=kt("upsertSavedPlace");return[o.useCallback((()=>a({label:t,placeId:n})),[t,n,a]),{data:Boolean(l),error:i,loading:r}]};var Pt=n(91604);function wt(e){let{cacheKey:t,internalStateKey:n}=e;const[o,a]=s.useState([]),l=s.useContext(m.oD),i=(0,Pt.jE)();return s.useEffect((()=>{if(l["".concat(n)]){var e;const o=i.getQueryData([t,null===(e=l["".concat(n)])||void 0===e?void 0:e.variables]);a(null!=o?o:[])}}),[l["".concat(n)]]),o}const xt=function(e){const{isLoading:t}=Rt("pudoLocationSearch",e,{enabled:bt(e),staleTime:y.pudoLocationSearch});return{errorMessage:s.useMemo((()=>""),[]),loading:t}};s.forwardRef(((e,t)=>(0,g.Y)(O,{...e,ref:t,sendRequestHook:xt}))).displayName="PudoLocationSearchInputReactQuery";const Et=s.forwardRef(((e,t)=>(0,g.Y)(gt,{...e,ref:t,sendRequestHook:xt,useDeleteSavedPlaceHook:yt,useResultsHook:wt,useSavedPlacesHook:Ct,useUpsertSavedPlaceHook:It})));function At(e){const{controlRef:t,enableSavedPlaces:n,pudoKey:a,stateKey:l,maxRVPudoDropdownHeight:i,...s}=e,c=o.useRef(null);return(0,g.Y)(Et,{...s,ref:null!=t?t:c,enableSavedPlaces:n,maxDropdownHeight:d(i),modalZIndex:2004,stateKey:l,type:r(a)})}Et.displayName="PudoLocationSearchSelectReactQuery";const Lt=e=>{let{blockKey:t,children:n,rvPudoEnabled:r}=e;const d={LocationSelect:(0,o.useMemo)((()=>((e,t)=>function(n){const{user:o}=(0,l.P)(t);return(0,g.Y)(At,{...n,enableSavedPlaces:Boolean(null==o?void 0:o.firstName),stateKey:i(e,n)})})(t,r)),[t,r])};return(0,g.Y)(a.W.Provider,{value:d,children:n})}},77314:(e,t,n)=>{n.d(t,{CJ:()=>i,E2:()=>r,PV:()=>l,d2:()=>o,rb:()=>s,s7:()=>u,w8:()=>d,xs:()=>c});const o=(e,t)=>({["border".concat(t,"Color")]:e.borderColor,["border".concat(t,"Style")]:e.borderStyle,["border".concat(t,"Width")]:e.borderWidth}),a=["accent","accent400","accent500","accent600","accent700","negative","negative400","negative500","negative600","negative700","positive","positive400","positive500","positive600","positive700","warning","warning400","warning500","warning600","warning700"],l=(e,t)=>({["".concat("rtl"===e.direction?"paddingRight":"paddingLeft")]:0===t?0:e.sizing[t]}),i=(e,t)=>({["".concat("rtl"===e.direction?"paddingLeft":"paddingRight")]:0===t?0:e.sizing[t]});function r(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),n=[0,0,0];return t&&(n[0]=parseInt(t[1],16),n[1]=parseInt(t[2],16),n[2]=parseInt(t[3],16)),n}const d=e=>({WebkitBoxOrient:"vertical",WebkitLineClamp:e,display:"-webkit-box",overflow:"hidden"}),s={overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},c={":after":{bottom:"-8px",content:'""',left:"-8px",position:"absolute",right:"-8px",top:"-8px"},position:"relative"},u={"::-webkit-scrollbar ":{display:"none"},"-ms-overflow-style":"none",scrollbarWidth:"none"}},92398:(e,t,n)=>{n.d(t,{W:()=>i});var o=n(90417),a=n(84385),l=n(40014);const i=o.createContext({LocationSelect:()=>(0,l.Y)(a.A,{disabled:!0})})},__fusion__065c3baf9b:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(90417),a=n(40014);const l=o.forwardRef((function(e,t){let{title:n="Circle small",titleId:o,size:l="1em",...i}=e;return(0,a.FD)("svg",{width:l,height:l,viewBox:"0 0 24 24",fill:"none",ref:t,"aria-labelledby":o,...i,children:[void 0===n?(0,a.Y)("title",{id:o,children:"Circle small"}):n?(0,a.Y)("title",{id:o,children:n}):null,(0,a.Y)("path",{d:"M12 17a5 5 0 1 0 0-10 5 5 0 0 0 0 10Z",fill:"currentColor"})]})}))},__fusion__3ba13bc820:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var o=n(90417),a=n(40014);const l=o.forwardRef((function(e,t){let{title:n="Briefcase",titleId:o,size:l="1em",...i}=e;return(0,a.FD)("svg",{width:l,height:l,viewBox:"0 0 24 24",fill:"none",ref:t,"aria-labelledby":o,...i,children:[void 0===n?(0,a.Y)("title",{id:o,children:"Briefcase"}):n?(0,a.Y)("title",{id:o,children:n}):null,(0,a.Y)("path",{d:"M18 7V2H6v5H1v15h22V7h-5Zm-3 0H9V5h6v2Z",fill:"currentColor"})]})}))},__fusion__5bde47abd4:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(90417),a=n(40014);const l=o.forwardRef((function(e,t){let{title:n="Airplane",titleId:o,size:l="1em",...i}=e;return(0,a.FD)("svg",{width:l,height:l,viewBox:"0 0 24 24",fill:"none",ref:t,"aria-labelledby":o,...i,children:[void 0===n?(0,a.Y)("title",{id:o,children:"Airplane"}):n?(0,a.Y)("title",{id:o,children:n}):null,(0,a.Y)("path",{d:"M21 9h-5.5L10 1H8v8H3.5l-2-2H0v10h1.5l2-2H8v8h2l5.5-8H21c1.7 0 3-1.3 3-3s-1.3-3-3-3Z",fill:"currentColor"})]})}))},__fusion__9e99649e9d:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(90417),a=n(40014);const l=o.forwardRef((function(e,t){let{title:n="Center",titleId:o,size:l="1em",...i}=e;return(0,a.FD)("svg",{width:l,height:l,viewBox:"0 0 24 24",fill:"none",ref:t,"aria-labelledby":o,...i,children:[void 0===n?(0,a.Y)("title",{id:o,children:"Center"}):n?(0,a.Y)("title",{id:o,children:n}):null,(0,a.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.9 10.5H24v3h-3.1c-.7 3.8-3.6 6.8-7.4 7.4V24h-3v-3.1c-3.8-.7-6.8-3.6-7.4-7.4H0v-3h3.1c.7-3.8 3.6-6.8 7.4-7.4V0h3v3.1c3.8.7 6.8 3.6 7.4 7.4ZM6 12c0 3.3 2.7 6 6 6s6-2.7 6-6-2.7-6-6-6-6 2.7-6 6Zm9 0a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z",fill:"currentColor"})]})}))},__fusion__bf7c9fec80:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(90417),a=n(40014);const l=o.forwardRef((function(e,t){let{title:n="Restaurant",titleId:o,size:l="1em",...i}=e;return(0,a.FD)("svg",{width:l,height:l,viewBox:"0 0 24 24",fill:"none",ref:t,"aria-labelledby":o,...i,children:[void 0===n?(0,a.Y)("title",{id:o,children:"Restaurant"}):n?(0,a.Y)("title",{id:o,children:n}):null,(0,a.Y)("g",{fill:"currentColor",children:(0,a.Y)("path",{d:"M9 8V1h2v7c0 2.3-1.5 4.2-3.5 4.8V23h-3V12.8C2.5 12.1 1 10.2 1 8V1h2v7h2V1h2v7h2ZM13 6c0-2.8 2.2-5 5-5s5 2.2 5 5v2c0 2.2-1.5 4.1-3.5 4.7V23h-3V12.7c-2-.6-3.5-2.5-3.5-4.7V6Z"})})]})}))},__fusion__f822297826:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(90417),a=n(40014);const l=o.forwardRef((function(e,t){let{title:n="Bed",titleId:o,size:l="1em",...i}=e;return(0,a.FD)("svg",{width:l,height:l,viewBox:"0 0 24 24",fill:"none",ref:t,"aria-labelledby":o,...i,children:[void 0===n?(0,a.Y)("title",{id:o,children:"Bed"}):n?(0,a.Y)("title",{id:o,children:n}):null,(0,a.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 9V8h3v12h-3v-3H4v3H1V4h3v5h16ZM5 5h6v3H5V5Z",fill:"currentColor"})]})}))}}]);
//# sourceMappingURL=https://sourcemaps.uberinternal.com/raw/uber-sites/client-4166-ef836e40d582ffc7.js.map