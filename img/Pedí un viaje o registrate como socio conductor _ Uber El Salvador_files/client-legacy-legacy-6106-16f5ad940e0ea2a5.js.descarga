(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([["legacy-6106"],{56106:function(t,e,n){"use strict";n.d(e,{k:function(){return Dt},g:function(){return Tt}});var r=n("__fusion__95b4ba69e5"),o=n(7658),i=n(55671),c=n(68934),u=n.n(c),a=n(36741),l=n(88662),s=n(75918),p=n(40014);function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,y(r.key),r)}}function y(t){var e=function(t,e){if("object"!==f(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===f(e)?e:String(e)}function b(t,e){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},b(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=g(t);if(e){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function g(t){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},g(t)}var v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b(t,e)}(n,t);var e=h(n);function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),e.apply(this,arguments)}return function(t,e,n){e&&d(t.prototype,e),n&&d(t,n),Object.defineProperty(t,"prototype",{writable:!1})}(n,[{key:"render",value:function(){return(0,p.Y)(s.y,{$color:this.props.color})}}]),n}(r.PureComponent),m=v,O=n(90417),P=n(93986);function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?x(Object(n),!0).forEach((function(e){D(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function D(t,e,n){return(e=j(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,j(r.key),r)}}function j(t){var e=function(t,e){if("object"!==w(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===w(e)?e:String(e)}function S(t,e){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},S(t,e)}function L(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C(t);if(e){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===w(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function C(t){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},C(t)}var E=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S(t,e)}(n,t);var e=L(n);function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),e.apply(this,arguments)}return function(t,e,n){e&&I(t.prototype,e),n&&I(t,n),Object.defineProperty(t,"prototype",{writable:!1})}(n,[{key:"render",value:function(){return(0,p.Y)(P.A,k(k({viewBox:"0 0 24 24"},this.props),{},{children:(0,p.Y)("path",{d:"M10.5 13.5L.5 11 21 3l-8 20.5-2.5-10z"})}))}}]),n}(O.Component);function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function R(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,A(r.key),r)}}function T(t,e){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},T(t,e)}function $(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=F(t);if(e){var o=F(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return B(t)}(this,n)}}function B(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function F(t){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},F(t)}function Y(t,e,n){return(e=A(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function A(t){var e=function(t,e){if("object"!==_(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===_(e)?e:String(e)}var z=o.P.colors,N=(0,i.I4)("div",(function(t){return Y({alignItems:"center",cursor:"pointer",display:"flex",fontSize:"16px",height:"100%",justifyContent:"center",position:"absolute",width:"1em"},t.$rtl?"left":"right","15px")})),K=function(t){var e=t.$error,n=t.$isLoadingCurrentLocation;return{color:e?z.negative400:z.black,opacity:e||n?1:.2,":focus":{color:e?z.negative400:z.primary600,opacity:1},":hover":{color:z.primary600,opacity:1}}},V=(0,i.I4)(l.A,K),M=(0,i.I4)(E,K),H=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T(t,e)}(n,t);var e=$(n);function n(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return Y(B(t=e.call.apply(e,[this].concat(o))),"clearSelection",(function(){t.props.clearSelection(t.props.type)})),Y(B(t),"handleLocationKeyPress",(function(e){e&&"Enter"===e.key&&t.props.fetchCurrentLocation()})),Y(B(t),"handleDeleteKeyPress",(function(e){e&&"Enter"===e.key&&t.clearSelection()})),t}return function(t,e,n){e&&R(t.prototype,e),n&&R(t,n),Object.defineProperty(t,"prototype",{writable:!1})}(n,[{key:"render",value:function(){var t=this.props,e=t.rtl,n=t.isVisible,r=t.fetchCurrentLocation,o=t.localization,i=t.isLoadingCurrentLocation,c=t.error;return i?(0,p.Y)(N,{$rtl:e,children:(0,p.Y)(m,{color:z.primary300})}):(0,p.Y)(N,{$rtl:e,children:n?(0,p.Y)(V,{$error:c,$isLoadingCurrentLocation:i,"aria-label":o.clearPickupAriaLabel,className:"pe-location-clear",height:"12px",role:"button",size:"small",tabIndex:"0",width:"12px",onClick:this.clearSelection,onKeyPress:this.handleDeleteKeyPress}):(0,p.Y)(M,{$error:c,$isLoadingCurrentLocation:i,"aria-label":o.locationLabel,className:"pe-location-fetch",height:"16px",role:"button",size:"small",tabIndex:"0",width:"16px",onClick:r,onKeyPress:this.handleLocationKeyPress})})}}]),n}(r.PureComponent),U=n(33534),q=n.n(U),Q=n(67265);function W(t){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W(t)}function G(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function J(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?G(Object(n),!0).forEach((function(e){rt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function X(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ot(r.key),r)}}function Z(t,e){return Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Z(t,e)}function tt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=nt(t);if(e){var o=nt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===W(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return et(t)}(this,n)}}function et(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nt(t){return nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},nt(t)}function rt(t,e,n){return(e=ot(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ot(t){var e=function(t,e){if("object"!==W(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==W(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===W(e)?e:String(e)}var it=o.P.colors,ct=(0,i.I4)("ul",{backgroundColor:it.primary50,border:0,left:0,listStyle:"none",margin:0,overflowY:"auto",padding:"16px 0",position:"absolute",right:0,zIndex:2}),ut=(0,i.I4)("div",{backgroundColor:it.black,height:"1px",left:"18px",opacity:.1,position:"absolute",right:"18px",top:0}),at=(0,i.I4)("li",(function(t){return{alignItems:"center",backgroundColor:t.$focused?it.primary200:it.primary50,boxSizing:"border-box",color:it.primary,cursor:"pointer",display:"flex",fontSize:"16px",lineHeight:"26px",minHeight:"45px",padding:"0 43px"}})),lt=(0,i.I4)("span",{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),st=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Z(t,e)}(n,t);var e=tt(n);function n(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return rt(et(t=e.call.apply(e,[this].concat(o))),"handleKeysPressed",(function(e){var n=t.props,r=n.items,o=n.closeList,i=n.type,c=n.focusedIndex;if(r){var u;if("ArrowDown"===e.key&&(u=null===c||c>=r.length-1?0:c+1,e.preventDefault&&e.preventDefault(),t.props.focusIndex(u)),"ArrowUp"===e.key&&(u=null===c||c<=0?r.length-1:c-1,e.preventDefault&&e.preventDefault(),t.props.focusIndex(u)),"Enter"===e.key){var a=r[c],l=a.id,s=a.provider;return e.preventDefault&&e.preventDefault(),t.props.onClickItem(l,s,c)}if("Escape"===e.key&&i)return e.preventDefault&&e.preventDefault(),o(i)}})),rt(et(t),"findFirstStringIndices",(function(t,e){var n=e.toLowerCase(),r=(t||"").trim().toLowerCase(),o=[];if(r)for(var i=!0;i;){var c=o.length?o[o.length-1]-1:void 0,u=n.lastIndexOf(r,c);-1!==u&&o.push(u),-1!==u&&u||(i=!1)}return o})),rt(et(t),"getSuggestionItem",(function(e){var n=(t.props.inputValue||"").trim();if(n){var r=t.findFirstStringIndices(n,e);if(r.length){var o=e;return r.forEach((function(t){o=o.slice(0,t)+"<strong>".concat(o.slice(t,t+n.length),"</strong>")+o.slice(t+n.length,o.length)})),o}}return e})),t}return function(t,e,n){e&&X(t.prototype,e),n&&X(t,n),Object.defineProperty(t,"prototype",{writable:!1})}(n,[{key:"componentDidMount",value:function(){q()&&q().addEventListener("keydown",this.handleKeysPressed)}},{key:"componentWillUnmount",value:function(){q()&&q().removeEventListener("keydown",this.handleKeysPressed)}},{key:"render",value:function(){var t=this,e=this.props,n=e.type,r=e.items,o=e.listBoxId,i=e.focusedIndex;return n&&(0,p.FD)(ct,{className:"pe-suggestions",id:o,role:"listbox",children:[(0,p.Y)(ut,{}),r&&r.map((function(e,o){var c=e.addressLine1,u=e.addressLine2,a=e.id,l=e.provider,s="".concat(c).concat(u?", ".concat(u):"");return(0,p.Y)(at,J(J({$focused:i===o,$isLast:o===r.length-1,"aria-label":"location suggestion item","aria-selected":i===o,className:"pe-suggestions-item",id:a,role:"option",onClick:function(){return t.props.onClickItem(a,l,o)}},Q.bg),{},{children:(0,p.Y)(lt,{dangerouslySetInnerHTML:{__html:t.getSuggestionItem(s)}})}),"".concat(n,"-suggestion-").concat(o))}))]})}}]),n}(r.PureComponent);function pt(t){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pt(t)}function ft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ot(r.key),r)}}function dt(t,e){return dt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},dt(t,e)}function yt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ht(t);if(e){var o=ht(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===pt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return bt(t)}(this,n)}}function bt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ht(t){return ht=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ht(t)}function gt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function vt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?gt(Object(n),!0).forEach((function(e){mt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function mt(t,e,n){return(e=Ot(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ot(t){var e=function(t,e){if("object"!==pt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==pt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===pt(e)?e:String(e)}var Pt=o.P.colors,wt=a.Ay.values,xt=wt.fontFamily,kt=wt.mediaQueries,Dt=1,It={content:'""',height:"6px",left:"-3px",position:"absolute",width:"6px"},jt=(0,i.I4)("div",(function(t){var e=t.$rtl,n=t.$hidden,r=t.$pickup,o=t.$destination;return mt(mt(mt({backgroundColor:n?"none":Pt.black,bottom:"33px",position:"absolute",top:"33px",width:"1px"},e?"right":"left","22px"),":after",vt(vt({},It),{},{backgroundColor:r?Pt.black:Pt.primary50,border:"1px solid ".concat(Pt.black),borderRadius:"50%",top:"-10px"})),":before",vt(vt({},It),{},{backgroundColor:o?Pt.black:Pt.primary50,border:"1px solid ".concat(Pt.black),bottom:"-10px",height:"5px",width:"5px"}))})),St=(0,i.I4)("div",(function(t){var e=t.$removeTopMargin;return mt({flex:"0 0 auto",fontFamily:xt.body,marginBottom:"13px",marginTop:e?0:"31px",position:"relative"},kt.palm,{marginBottom:"26px",marginTop:e?0:"20px"})})),Lt=(0,i.I4)("div",(function(t){return{display:"flex",flexDirection:"row",marginTop:t.$gutter?0:"8px",position:"relative",width:"100%"}})),Ct=(0,i.I4)("div",{display:"flex",flex:"1 1 auto",flexDirection:"row",position:"relative"}),Et=(0,i.I4)("input",(function(t){var e=t.$theme,n=t.$error,r=t.$rtl,o=e.typography;return vt(mt(mt({backgroundColor:Pt.primary50,border:"none",boxSizing:"border-box",color:n?Pt.negative400:Pt.black,flex:1,margin:0,minHeight:"52px",outline:"none",overflow:"hidden",paddingBottom:"11px",paddingTop:"11px",position:"relative",textOverflow:"ellipsis",whiteSpace:"nowrap",width:"100%",zIndex:0},r?"paddingLeft":"paddingRight","33px"),r?"paddingRight":"paddingLeft","41px"),o.font300)})),_t=(0,i.I4)("div",(function(t){return mt({alignItems:"center",cursor:"pointer",display:"flex",fontSize:"23px",height:"100%",justifyContent:"center",position:"absolute",width:"16px"},t.$rtl?"left":"right","15px")})),Rt=(0,i.I4)(l.A,{color:Pt.black,opacity:.2,":focus":{color:Pt.primary600,opacity:1},":hover":{color:Pt.primary600,opacity:1}}),Tt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dt(t,e)}(n,t);var e=yt(n);function n(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),mt(bt(r=e.call(this,t)),"state",{destinationInput:"",focusedInput:null,isDetectionError:!1,pickupInput:"",prevDestinationDetails:null,prevPickupDetails:null,focusedDestinationIndex:0,focusedPickupIndex:0}),mt(bt(r),"destinationListBoxId","destination-suggestions-listbox-".concat(Math.random())),mt(bt(r),"pickupListBoxId","pickup-suggestions-listbox-".concat(Math.random())),mt(bt(r),"mapToSubmitEstimatePoint",(function(t,e){return{id:t.id,latitude:t.lat,locale:e,longitude:t.long,provider:t.provider}})),mt(bt(r),"setInputValue",(function(t,e){r.setState(mt({},"".concat(t,"Input"),r.getInputValueFromPoint(e)))})),mt(bt(r),"getInputValueFromPoint",(function(t){return t.addressLine1&&t.addressLine2?"".concat(t.addressLine1,", ").concat(t.addressLine2):"".concat(t.fullAddress)})),mt(bt(r),"fetchSuggestions",(function(t){var e=r.props.locale,n=r.getTargetLatLng(),o=n.lat,i=n.long;r.props.getSuggestions({lat:o,locale:e,long:i,q:t.value,type:t.name})})),mt(bt(r),"getTargetLatLng",(function(){var t=r.props,e=t.mapCenter,n=t.pickupDetails,o=t.destinationDetails;return n&&n.lat?{lat:n.lat,long:n.long}:o&&o.lat?{lat:o.lat,long:o.long}:{lat:null==e?void 0:e.latitude,long:null==e?void 0:e.longitude}})),mt(bt(r),"clickSuggestionItem",(function(t,e,n){var o,i,c=r.state.focusedInput,u=r.props,a=u.locale,l=u.suggestions;c&&l&&l[c]&&(r.props.loadPlaceDetails({id:(null===(o=l[c])||void 0===o?void 0:o[n].id)||"",locale:a,provider:(null===(i=l[c])||void 0===i?void 0:i[n].provider)||"",type:c}),r.loadNextChangedPlace("pickup"===r.state.focusedInput?"destination":"pickup"))})),mt(bt(r),"focusIndex",(function(t){var e=r.state.focusedInput;if(e){var n="pickup"===e?"focusedPickupIndex":"focusedDestinationIndex";r.setState(mt({},n,t))}})),mt(bt(r),"loadNextChangedPlace",(function(t){var e,n,o;r.props.suggestions[t]&&null!==(e=r.props.suggestions[t])&&void 0!==e&&e.length&&(!r.props["".concat(t,"Details")]&&r.state["".concat(t,"Input")]||r.props["".concat(t,"Details")]&&r.state["".concat(t,"Input")]!==r.getInputValueFromPoint(r.props["".concat(t,"Details")]))&&r.props.loadPlaceDetails({id:(null===(n=r.props.suggestions[t])||void 0===n?void 0:n[0].id)||"",locale:r.props.locale,provider:(null===(o=r.props.suggestions[t])||void 0===o?void 0:o[0].provider)||"",type:t});r.setState({focusedInput:null})})),mt(bt(r),"focusPickup",(function(){r.pickupRef.focus()})),mt(bt(r),"focusDestination",(function(){r.destinationRef.focus()})),mt(bt(r),"clearInput",(function(t){r.setState(mt(mt(mt({},"".concat(t,"Input"),""),"focusedInput",null),"".concat(t,"InputChanged"),!1)),r.fetchSuggestions({name:t,value:""}),r.props["".concat(t,"Details")]&&(r.props.clearFEPlaceDetails(t),r.props.clearFEDirections())})),mt(bt(r),"closeSuggestionsList",(function(t){r.setState({focusedInput:null}),r["".concat(t,"Ref")].blur()})),mt(bt(r),"triggerDetactionError",(function(t,e){r.setState({isDetectionError:t&&e===Dt},(function(){r.props.setDetectionError(t,e)}))})),mt(bt(r),"fetchCurrentLocation",(function(){r.triggerDetactionError(!1),window&&navigator.geolocation.getCurrentPosition((function(t){t&&t.coords?(r.props.fetchCurrentLocation({lang:r.props.locale,lat:t.coords.latitude,lng:t.coords.longitude}),r.loadNextChangedPlace("destination")):r.triggerDetactionError(!0)}),(function(t){r.triggerDetactionError(!0,t.code)}))})),mt(bt(r),"onInputChanged",(function(t){var e=t.target;r.setState(mt(mt(mt({},"".concat(e.name,"Input"),e.value),"focusedInput",e.name),"".concat(e.name,"InputChanged"),!0),(function(){r.triggerDetactionError(!1),r.fetchSuggestions(e)}))})),mt(bt(r),"onInputFocused",(function(t){var e=t.target;return r.setState({focusedInput:e.name})})),mt(bt(r),"onInputBlured",(function(t){var e=t.target;setTimeout((function(){e.name===r.state.focusedInput&&r.setState({focusedInput:null})}),150),r.props.dataTrackingHandler&&r.props.dataTrackingHandler(e.value,e.name)})),mt(bt(r),"clearDestinationSelection",(function(){return r.clearInput("destination")})),mt(bt(r),"saveDestRef",(function(t){return r.destinationRef=t})),mt(bt(r),"savePickupRef",(function(t){return r.pickupRef=t})),mt(bt(r),"handleDeleteDestinationKeyPress",(function(t){t&&"Enter"===t.key&&r.clearDestinationSelection()})),r.fetchSuggestions=u()(r.fetchSuggestions,300),r}return function(t,e,n){e&&ft(t.prototype,e),n&&ft(t,n),Object.defineProperty(t,"prototype",{writable:!1})}(n,[{key:"componentDidUpdate",value:function(t){var e=!1;this.props.pickupDetails&&t.pickupDetails!==this.props.pickupDetails&&(this.setInputValue("pickup",this.props.pickupDetails),e=!0),this.props.destinationDetails&&t.destinationDetails!==this.props.destinationDetails&&(this.setInputValue("destination",this.props.destinationDetails),e=!0),!e||this.props.placeDetailsLoading.pickup||this.props.placeDetailsLoading.destination||(this.props.destinationDetails&&this.props.pickupDetails&&(this.props.loadFEDirections&&this.props.loadFEDirections({destinationDetails:this.props.destinationDetails,pickupDetails:this.props.pickupDetails}),this.props.loadFareEstimates&&this.props.loadFareEstimates({destination:this.mapToSubmitEstimatePoint(this.props.destinationDetails,this.props.locale),locale:this.props.locale,origin:this.mapToSubmitEstimatePoint(this.props.pickupDetails,this.props.locale)})),this.props.pickupDetails&&!this.props.destinationDetails?this.focusDestination():!this.props.pickupDetails&&this.props.destinationDetails&&this.focusPickup())}},{key:"render",value:function(){var t,e,n,r=this.props,o=r.localization,i=r.suggestions,c=r.errors,u=r.isLoadingCurrentLocation,a=r.rtl,l=r.pickupDetails,s=r.destinationDetails,f=r.removeTopMargin,d=this.state,y=d.pickupInput,b=d.destinationInput,h=d.focusedInput,g=d.isDetectionError,v=d.focusedPickupIndex,m=d.focusedDestinationIndex,O=h&&i&&i[h],P=!(null==O||!O.length)&&"pickup"===h,w=!(null==O||!O.length)&&"destination"===h,x=P&&(null==O||null===(t=O[v])||void 0===t?void 0:t.id),k=w&&(null==O||null===(e=O[m])||void 0===e?void 0:e.id);return(0,p.FD)(St,{$removeTopMargin:f,children:[(0,p.FD)(Lt,{"aria-expanded":P,"aria-haspopup":"listbox","aria-owns":this.pickupListBoxId,role:"combobox",$gutter:!0,children:[(0,p.Y)(Et,{ref:this.savePickupRef,$error:c&&c.pickup||g,$rtl:a,"aria-activedescendant":x,"aria-autocomplete":"list","aria-controls":this.pickupListBoxId,"aria-label":null==o?void 0:o.pickupAriaLabel,autoComplete:"off",name:"pickup",placeholder:null==o?void 0:o.pickupPlaceholder,title:y,type:"text",value:y,onBlur:this.onInputBlured,onChange:this.onInputChanged,onFocus:this.onInputFocused}),(0,p.Y)(H,{clearSelection:this.clearInput,error:g,fetchCurrentLocation:this.fetchCurrentLocation,isLoadingCurrentLocation:u,isVisible:!(null==y||!y.length),localization:o,rtl:a,type:"pickup"})]}),P&&(0,p.Y)(st,{closeList:this.closeSuggestionsList,focusIndex:this.focusIndex,focusedIndex:v,inputValue:y,items:O,listBoxId:this.pickupListBoxId,type:h,onClickItem:this.clickSuggestionItem}),(0,p.Y)(Lt,{$gutter:!1,"aria-expanded":w,"aria-haspopup":"listbox","aria-owns":this.destinationListBoxId,role:"combobox",children:(0,p.FD)(Ct,{children:[(0,p.Y)(Et,{ref:this.saveDestRef,$error:c&&c.destination,$rtl:a,"aria-activedescendant":k,"aria-autocomplete":"list","aria-controls":this.destinationListBoxId,"aria-label":null==o?void 0:o.destinationAriaLabel,autoComplete:"off",name:"destination",placeholder:null==o?void 0:o.destinationPlaceholder,title:b,type:"text",value:b,onBlur:this.onInputBlured,onChange:this.onInputChanged,onFocus:this.onInputFocused}),!(!b||!b.length)&&(0,p.Y)(_t,{$rtl:a,children:(0,p.Y)(Rt,{"aria-label":null==o?void 0:o.clearDestinationAriaLabel,className:"pe-location-clear",height:"12px",role:"button",size:"small",tabIndex:"0",width:"12px",onClick:this.clearDestinationSelection,onKeyPress:this.handleDeleteDestinationKeyPress})})]})}),w&&(0,p.Y)(st,{closeList:this.closeSuggestionsList,focusIndex:this.focusIndex,focusedIndex:m,inputValue:b,items:O,listBoxId:this.destinationListBoxId,type:h,onClickItem:this.clickSuggestionItem}),(0,p.Y)(jt,{$destination:!!s,$hidden:"pickup"===h&&i&&i[h]&&!(null===(n=i[h])||void 0===n||!n.length),$pickup:!!l,$rtl:a})]})}}],[{key:"getDerivedStateFromProps",value:function(t,e){var n=t.isPickupUsingCurrentLocation,r=t.destinationDetails,o=t.pickupDetails,i=e.prevDestinationDetails,c=e.prevPickupDetails,u=e.destinationInput,a=!c||o!==c,l=o&&a&&{pickupInput:o.addressLine1,prevPickupDetails:o};if(n&&l){var s=r&&!u?{destinationInput:r.fullAddress}:{};return vt(vt({},l),s)}var p=r&&(!i||r!==i)&&{destinationInput:r.fullAddress,prevDestinationDetails:r},f=o&&a&&{pickupInput:o.fullAddress,prevPickupDetails:o};return p||f?vt(vt({},p||{}),f||{}):e}}]),n}(r.PureComponent);mt(Tt,"defaultProps",{placeDetailsLoading:{},removeTopMargin:!1})},68934:function(t){t.exports=function(t,e,n){var r=null,o=null,i=function(){r&&(clearTimeout(r),o=null,r=null)},c=function(){if(!e)return t.apply(this,arguments);var c=this,u=arguments,a=n&&!r;return i(),o=function(){t.apply(c,u)},r=setTimeout((function(){if(r=null,!a){var t=o;return o=null,t()}}),e),a?o():void 0};return c.cancel=i,c.flush=function(){var t=o;i(),t&&t()},c}}}]);
//# sourceMappingURL=https://sourcemaps.uberinternal.com/raw/uber-sites/client-legacy-legacy-6106-16f5ad940e0ea2a5.js.map